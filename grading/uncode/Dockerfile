# DOCKER-VERSION 1.1.0

# Inherit from the base container, which has all the needed scripts to launch tasks
FROM    unjudge/inginious-c-base

ADD     . /INGInious

RUN     dnf -y install dnf-plugins-core

# Install grading library
RUN     chmod -R 644 /INGInious/grading && \
        mkdir -p /usr/lib/python3.9/site-packages/grading && \
        cp -R /INGInious/grading/.  /usr/lib/python3.9/site-packages/grading/ && \
        echo "grading" > /usr/lib/python3.9/site-packages/grading.pth

# Add the i18n files generated by pybabel.
RUN     cp -r /INGInious/lang/ /usr/lib/python3.9/site-packages/grading/__lang/

RUN     rm -R /INGInious